<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Distance and Densities · MultivariateAnomalies.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link href="../../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>MultivariateAnomalies.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../../">Home</a></li><li><span class="toctext">Manual</span><ul><li><a class="toctext" href="../HighLevelFunctions/">High Level Functions</a></li><li><a class="toctext" href="../DetectionAlgorithms/">Anomaly Detection Algorithms</a></li><li class="current"><a class="toctext" href>Distance and Densities</a><ul class="internal"><li><a class="toctext" href="#Distance,-Kernel-Matrices-and-k-Nearest-Neighbours-1">Distance, Kernel Matrices and k-Nearest Neighbours</a></li><li><a class="toctext" href="#Distance/Similarity-Matrices-1">Distance/Similarity Matrices</a></li><li><a class="toctext" href="#k-Nearest-Neighbor-Objects-1">k-Nearest Neighbor Objects</a></li><li><a class="toctext" href="#Kernel-Matrices-(Dissimilarities)-1">Kernel Matrices (Dissimilarities)</a></li><li><a class="toctext" href="#Index-1">Index</a></li></ul></li><li><a class="toctext" href="../Postprocessing/">Postprocessing</a></li><li><a class="toctext" href="../Preprocessing/">Preprocessing</a></li><li><a class="toctext" href="../AUC/">AUC</a></li><li><a class="toctext" href="../OnlineAlgorithms/">OnlineAlgorithms</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li>Manual</li><li><a href>Distance and Densities</a></li></ul><a class="edit-page" href="https://github.com/milanflach/MultivariateAnomalies.jl/blob/master/docs/src/man/DistancesDensity.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Distance and Densities</span><a class="fa fa-bars" href="#"></a></div></header><h2><a class="nav-anchor" id="Distance,-Kernel-Matrices-and-k-Nearest-Neighbours-1" href="#Distance,-Kernel-Matrices-and-k-Nearest-Neighbours-1">Distance, Kernel Matrices and k-Nearest Neighbours</a></h2><p>Compute distance matrices (similarity matrices) and convert them into kernel matrices or k-nearest neighbor objects.</p><h2><a class="nav-anchor" id="Distance/Similarity-Matrices-1" href="#Distance/Similarity-Matrices-1">Distance/Similarity Matrices</a></h2><p>A distance matrix <code>D</code> consists of pairwise distances <span>$d()$</span>computed with some metrix (e.g. Euclidean):</p><div>\[D = d(X_{t_i}, X_{t_j})\]</div><p>i.e. the distance between vector <span>$X$</span> of observation <span>$t_i$</span> and <span>$t_j$</span> for all observations <span>$t_i,t_j = 1 \ldots T$</span>.</p><h4><a class="nav-anchor" id="Functions-1" href="#Functions-1">Functions</a></h4><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MultivariateAnomalies.dist_matrix" href="#MultivariateAnomalies.dist_matrix"><code>MultivariateAnomalies.dist_matrix</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">dist_matrix(data::AbstractArray{tp, N}; dist::String = &quot;Euclidean&quot;, space::Int = 0, lat::Int = 0, lon::Int = 0, Q = 0) where {tp, N}
dist_matrix(data::AbstractArray{tp, N}, training_data; dist::String = &quot;Euclidean&quot;, space::Int = 0, lat::Int = 0, lon::Int = 0, Q = 0) where {tp, N}</code></pre><p>compute the distance matrix of <code>data</code> or the distance matrix between data and training data i.e. the pairwise distances along the first dimension of data, using the last dimension as variables. <code>dist</code> is a distance metric, currently <code>Euclidean</code>(default), <code>SqEuclidean</code>, <code>Chebyshev</code>, <code>Cityblock</code>, <code>JSDivergence</code>, <code>Mahalanobis</code> and <code>SqMahalanobis</code> are supported. The latter two need a covariance matrix <code>Q</code> as input argument.</p><p><strong>Examples</strong></p><pre><code class="language-none">julia&gt; dc = randn(10, 4,3)
julia&gt; D = dist_matrix(dc, space = 2)</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/milanflach/MultivariateAnomalies.jl/blob/c514235e68d164cefe287aafec2195f0ce629236/src/DistDensity.jl#L86-L99">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MultivariateAnomalies.dist_matrix!" href="#MultivariateAnomalies.dist_matrix!"><code>MultivariateAnomalies.dist_matrix!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">dist_matrix!(D_out, data, ...)</code></pre><p>compute the distance matrix of <code>data</code>, similar to <code>dist_matrix()</code>. <code>D_out</code> object has to be preallocated, i.e. with <code>init_dist_matrix</code>.</p><p><strong>Examples</strong></p><pre><code class="language-none">julia&gt; dc = randn(10,4, 4,3)
julia&gt; D_out = init_dist_matrix(dc)
julia&gt; dist_matrix!(D_out, dc, lat = 2, lon = 2)
julia&gt; D_out[1]</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/milanflach/MultivariateAnomalies.jl/blob/c514235e68d164cefe287aafec2195f0ce629236/src/DistDensity.jl#L30-L42">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MultivariateAnomalies.init_dist_matrix" href="#MultivariateAnomalies.init_dist_matrix"><code>MultivariateAnomalies.init_dist_matrix</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">init_dist_matrix(data)
init_dist_matrix(data, training_data)</code></pre><p>initialize a <code>D_out</code> object for <code>dist_matrix!()</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/milanflach/MultivariateAnomalies.jl/blob/c514235e68d164cefe287aafec2195f0ce629236/src/DistDensity.jl#L3-L8">source</a></section><h2><a class="nav-anchor" id="k-Nearest-Neighbor-Objects-1" href="#k-Nearest-Neighbor-Objects-1">k-Nearest Neighbor Objects</a></h2><p>k-Nearest Neighbor objects return the k nearest points and their distance out of a distance matrix <code>D</code>.</p><h4><a class="nav-anchor" id="Functions-2" href="#Functions-2">Functions</a></h4><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MultivariateAnomalies.knn_dists" href="#MultivariateAnomalies.knn_dists"><code>MultivariateAnomalies.knn_dists</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">knn_dists(D, k::Int, temp_excl::Int = 0)</code></pre><p>returns the k-nearest neighbors of a distance matrix <code>D</code>. Excludes <code>temp_excl</code> (default: <code>temp_excl = 0</code>) distances from the main diagonal of <code>D</code> to be also nearest neighbors.</p><p><strong>Examples</strong></p><pre><code class="language-none">julia&gt; dc = randn(20, 4,3)
julia&gt; D = dist_matrix(dc, space = 2)
julia&gt; knn_dists_out = knn_dists(D, 3, 1)
julia&gt; knn_dists_out[5] # distances
julia&gt; knn_dists_out[4] # indices</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/milanflach/MultivariateAnomalies.jl/blob/c514235e68d164cefe287aafec2195f0ce629236/src/DistDensity.jl#L112-L126">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MultivariateAnomalies.knn_dists!" href="#MultivariateAnomalies.knn_dists!"><code>MultivariateAnomalies.knn_dists!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">knn_dists!(knn_dists_out, D, temp_excl::Int = 0)</code></pre><p>returns the k-nearest neighbors of a distance matrix <code>D</code>. Similar to <code>knn_dists()</code>, but uses preallocated input object <code>knn_dists_out</code>, initialized with <code>init_knn_dists()</code>. Please note that the number of nearest neighbors <code>k</code> is not necessary, as it is already determined by the <code>knn_dists_out</code> object.</p><p><strong>Examples</strong></p><pre><code class="language-none">julia&gt; dc = randn(20, 4,3)
julia&gt; D = dist_matrix(dc, space = 2)
julia&gt; knn_dists_out = init_knn_dists(dc, 3)
julia&gt; knn_dists!(knn_dists_out, D)
julia&gt; knn_dists_out[5] # distances
julia&gt; knn_dists_out[4] # indices</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/milanflach/MultivariateAnomalies.jl/blob/c514235e68d164cefe287aafec2195f0ce629236/src/DistDensity.jl#L160-L175">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MultivariateAnomalies.init_knn_dists" href="#MultivariateAnomalies.init_knn_dists"><code>MultivariateAnomalies.init_knn_dists</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">init_knn_dists(T::Int, k::Int)
init_knn_dists(datacube::AbstractArray, k::Int)</code></pre><p>initialize a preallocated <code>knn_dists_out</code> object. <code>k</code>is the number of nerarest neighbors, <code>T</code> the number of time steps (i.e. size of the first dimension) or a multidimensional <code>datacube</code>.</p></div></div><a class="source-link" target="_blank" href="https://github.com/milanflach/MultivariateAnomalies.jl/blob/c514235e68d164cefe287aafec2195f0ce629236/src/DistDensity.jl#L135-L140">source</a></section><h2><a class="nav-anchor" id="Kernel-Matrices-(Dissimilarities)-1" href="#Kernel-Matrices-(Dissimilarities)-1">Kernel Matrices (Dissimilarities)</a></h2><p>A distance matrix <code>D</code> can be converted into a kernel matrix <code>K</code>, i.e. by computing pairwise dissimilarities using Gaussian kernels centered on each datapoint. </p><div>\[K= exp(-0.5 \cdot D \cdot \sigma^{-2})\]</div><h4><a class="nav-anchor" id="Functions-3" href="#Functions-3">Functions</a></h4><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MultivariateAnomalies.kernel_matrix" href="#MultivariateAnomalies.kernel_matrix"><code>MultivariateAnomalies.kernel_matrix</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">kernel_matrix(D::AbstractArray, σ::Float64 = 1.0[, kernel::String = &quot;gauss&quot;, dimension::Int64 = 1])</code></pre><p>compute a kernel matrix out of distance matrix <code>D</code>, given <code>σ</code>. Optionally normalized by the <code>dimension</code>, if <code>kernel = &quot;normalized_gauss&quot;</code>. compute <code>D</code> with <code>dist_matrix()</code>.</p><p><strong>Examples</strong></p><pre><code class="language-none">julia&gt; dc = randn(20, 4,3)
julia&gt; D = dist_matrix(dc, space = 2)
julia&gt; K = kernel_matrix(D, 2.0)</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/milanflach/MultivariateAnomalies.jl/blob/c514235e68d164cefe287aafec2195f0ce629236/src/DistDensity.jl#L198-L210">source</a></section><section class="docstring"><div class="docstring-header"><a class="docstring-binding" id="MultivariateAnomalies.kernel_matrix!" href="#MultivariateAnomalies.kernel_matrix!"><code>MultivariateAnomalies.kernel_matrix!</code></a> — <span class="docstring-category">Function</span>.</div><div><div><pre><code class="language-julia">kernel_matrix!(K, D::AbstractArray, σ::Float64 = 1.0[, kernel::String = &quot;gauss&quot;, dimension::Int64 = 1])</code></pre><p>compute a kernel matrix out of distance matrix <code>D</code>. Similar to <code>kernel_matrix()</code>, but with preallocated Array K (<code>K = similar(D)</code>) for output.</p><p><strong>Examples</strong></p><pre><code class="language-none">julia&gt; dc = randn(20, 4,3)
julia&gt; D = dist_matrix(dc, space = 2)
julia&gt; kernel_matrix!(D, D, 2.0) # overwrites distance matrix</code></pre></div></div><a class="source-link" target="_blank" href="https://github.com/milanflach/MultivariateAnomalies.jl/blob/c514235e68d164cefe287aafec2195f0ce629236/src/DistDensity.jl#L218-L229">source</a></section><h2><a class="nav-anchor" id="Index-1" href="#Index-1">Index</a></h2><ul><li><a href="#MultivariateAnomalies.dist_matrix"><code>MultivariateAnomalies.dist_matrix</code></a></li><li><a href="#MultivariateAnomalies.dist_matrix!"><code>MultivariateAnomalies.dist_matrix!</code></a></li><li><a href="#MultivariateAnomalies.init_dist_matrix"><code>MultivariateAnomalies.init_dist_matrix</code></a></li><li><a href="#MultivariateAnomalies.init_knn_dists"><code>MultivariateAnomalies.init_knn_dists</code></a></li><li><a href="#MultivariateAnomalies.kernel_matrix"><code>MultivariateAnomalies.kernel_matrix</code></a></li><li><a href="#MultivariateAnomalies.kernel_matrix!"><code>MultivariateAnomalies.kernel_matrix!</code></a></li><li><a href="#MultivariateAnomalies.knn_dists"><code>MultivariateAnomalies.knn_dists</code></a></li><li><a href="#MultivariateAnomalies.knn_dists!"><code>MultivariateAnomalies.knn_dists!</code></a></li></ul><footer><hr/><a class="previous" href="../DetectionAlgorithms/"><span class="direction">Previous</span><span class="title">Anomaly Detection Algorithms</span></a><a class="next" href="../Postprocessing/"><span class="direction">Next</span><span class="title">Postprocessing</span></a></footer></article></body></html>
